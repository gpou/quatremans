<% provide(:title, "#{t("productes.index.title")} | #{@producte.nom}") %>
<% provide(:class, "producte") %>
<% content_for :titols do %>
  <h2><%= link_to @producte.coleccio.nom, @producte.coleccio, :title => t('coleccions.coleccio_x', :nom => @producte.coleccio.nom) %></h2>
  <h1><%= @producte.nom %></h1>
<% end %>

<div class="quadre">
  <div class="fotos">
    <a href="<%= @producte.fotos.first.file.url(:wide) %>" title="<%= @producte.nom %>" class="gran" rel="zoom">
      <%= image_tag("#{@producte.fotos.first.file.url(:medium)}", id: "main_image", alt: @producte.nom) %>
    </a>
  </div>
  <div class="dibuix">
    <a href="<%= edit_cart_item_path(id: @producte.id) %>" class="personalitza" title="<%=t('carts.personalitza.titol_fitxa')%>">
      <% if @producte.tipus=='model' %>
        <% dibuix = "images/dibuix#{(@producte.id==13 || @producte.id==1) ? "_darrera" : ""}.jpg" %>
        <%= image_tag(dibuix, id: "dibuix", alt: t('carts.personalitza.titol_fitxa')) %>
      <% end %>
      <svg
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns="http://www.w3.org/2000/svg"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         version="1.1"
         width="330"
         height="423"
         id="svg3723">
        <% @producte.config_parametres.each do |parametre| %>
          <% parametre.config_zones.each do |zona| %>
            <path d="<%=zona.svg%>" id="zona_<%=zona.id%>" class="color" style="fill:#eeeeee;fill-opacity:1;stroke:none" />
          <% end %>
        <% end %>
        <path d="<%=@producte.svg%>" style="fill:#000000;fill-opacity:1" />
        <%= render 'boto_personalitza' %>
    </a>
  </div>
  <div class="dret">
    <div class="descripcio"><%= simple_format(@producte.descripcio) %></div>
    
    <p class="preu">
      <a href="<%= edit_cart_item_path(id: @producte.id) %>" class="personalitza" title="<%=t('carts.personalitza.titol_fitxa')%>"><span><%=t("carts.add")%></span></a>
      <%= number_with_precision(@producte.preu) %>â‚¬
    </p> 
    <p class="dificultat">
      <span><%=t("activerecord.attributes.producte.dificultat")%>:</span>
      <%= image_tag("nivell_#{@producte.dificultat>=1?"si":"no"}.png", :alt => t("activerecord.attributes.producte.dificultat")) %>
      <%= image_tag("nivell_#{@producte.dificultat>=2?"si":"no"}.png", :alt => t("activerecord.attributes.producte.dificultat")) %>
      <%= image_tag("nivell_#{@producte.dificultat>=3?"si":"no"}.png", :alt => t("activerecord.attributes.producte.dificultat")) %>
      <%= image_tag("nivell_#{@producte.dificultat>=4?"si":"no"}.png", :alt => t("activerecord.attributes.producte.dificultat")) %>
    </p>
  </div>
</div>
<div class="thumbs">
  <% if @producte.fotos.count > 8
    width = ((970+3)/(@producte.fotos.count) - 3).floor.to_s
  else
    width = ""
  end %>
  <% @producte.fotos.each do |foto| %>
  <a href="<%= foto.file.url(:wide) %>" title="<%= @producte.nom %>" rel="zoom" <%= (width.blank?) ? "" : "style=width:#{width}px" %>>
    <%= image_tag(foto.file.url(:medium), alt: @producte.nom, :style => (width.blank?) ? "" : "width:#{width}px;height:auto" ) %>
  </a>
  <% end %>
</div>